$CMS_SET(set_carouselItem,{:})$
$CMS_SET(void, set_carouselItem.put("itemPreviewId", "" + previewId()))$
$CMS_SET(void, set_carouselItem.put("title",if(st_title.isEmpty(),"",st_title.convert2)))$
$CMS_SET(void, set_carouselItem.put("titleColor", st_titleColor))$
$CMS_SET(void, set_carouselItem.put("subtitle",if(st_subtitle.isEmpty(),"",st_subtitle.convert2)))$
$CMS_SET(void, set_carouselItem.put("subtitleColor", st_subtitleColor))$

$CMS_SET(set_backgroundImage,{:})$
$CMS_IF(!st_backgroundImage.isEmpty())$
	$CMS_SET(set_imageUrl)$$CMS_REF(st_backgroundImage,resolution:"BANNER_IMAGE",abs:1)$$CMS_END_SET$
	$CMS_SET(void, set_backgroundImage.put("background_image_url", set_imageUrl.toString()))$
	$CMS_IF(!#global.isRelease())$
		$CMS_SET(previewId)$$CMS_VALUE(previewId(element:st_backgroundImage))$$CMS_END_SET$
		$CMS_SET(void, set_backgroundImage.put("previewId", previewId.toString()))$
	$CMS_END_IF$
$CMS_END_IF$

$CMS_SET(void, set_carouselItem.put("backgroundImage", set_backgroundImage))$

$CMS_IF(!st_link.isEmpty())$
	$CMS_SET(set_link,{:})$
	$CMS_VALUE(st_link)$
	$CMS_SET(void, set_carouselItem.put("link",set_link))$
$CMS_END_IF$

$CMS_SET(void, set_carouselItems.add(set_carouselItem))$

